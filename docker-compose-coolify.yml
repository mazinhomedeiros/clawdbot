services:
  clawdbot-gateway:
    build:
      context: .
      dockerfile: Dockerfile
    restart: unless-stopped
    init: true

    environment:
      HOME: /home/node
      TERM: xterm-256color
      CLAWDBOT_GATEWAY_TOKEN: ${CLAWDBOT_GATEWAY_TOKEN}

    volumes:
      - clawdbot_config:/home/node/.clawdbot
      - clawdbot_workspace:/home/node/clawd

    ports:
      - '127.0.0.1:18789:18789'
      - '127.0.0.1:18790:18790'

    command:
      [
        "node",
        "dist/index.js",
        "gateway-daemon",
        "--bind",
        "lan",
        "--port",
        "18789"
      ]

volumes:
  clawdbot_config:
  clawdbot_workspace:
